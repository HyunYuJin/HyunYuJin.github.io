---
title: "Scope? (스코프?)"
categories:
  - Javascript
tags:
  - Javascript
  - ES6
---

### 흔히 변수의 Scope라고 부른다.
### Scope: (무엇을 하거나 이룰 수 있는) 기회, (주제 조직 활동 등이 다루는) **범위**
### **ES5는 함수 단위 스코프, ES6는 블록 단위의 스코프**

# Scope의 의미
변수의 Scope는 변수를 사용할 수 있는 범위
ES5까지는 **함수 단위의 스코프**를 가진다.

```javascript
// 전역 공간은 스코프를 공유한다.
var a = 1;
var b = 2;

if (a < b) {
	var i = 3;
} else {
	// 사실 전역에 있는 변수는 공유되기 때문에 var 를 생략해도 된다.
	var i = 4;
}

var c = function() { // 함수 단위의 스코프 시작
	var a = 5;
	var d = 6;
	console.log(a); // 5, 현재 스코프에 a가 있기 때문에 현재 스코프에 있는 a를 출력
}

console.log(i); // 3, 함수 단위의 스코프이기 때문에 같은 전역 공간에 있다고 간주해서 변수를 공유하기 때문에 사용 가능

c();
console.log(d); // Uncaught ReferenceError: d is not defined, 함수 단위의 스코프이기 때문에 함수 내부에서 쓰인 변수는 함수에서만 사용할 수 있다.
```

# Scope Chaining (스코프 체이닝)
var를 쓰지 않고 변수를 선언하면 상위 스코프로 체인을 타고 해당 변수를 찾아 여정을 떠난다.
전역 스코프에도 해당 변수가 없으면 새로 만든다.
var를 쓰지 않고 변수를 선언하다보면 변수의 스코프가 뒤죽박죽 된다.
이걸 사전에 방지하고 오류를 내주는 것이 **strict mode**

## 변수 사용에 있어서의 스코프 체이닝 발생
```javascript
var a = 1;
var b = function() { // 외부 함수 스코프(b)의 시작
	var c = 2;
	var d = funtion() { // 내부 함수 스코프(d)의 시작
		// 1. 현재 스코프(d)dpsms a라는 변수가 없다.
		// 2. 스코프 체인을 타고 스코프(b)로 올라간다.
		// 3. 스코프(b)에도 a란 변수가 없다.
		// 4. 스코프 체인을 타고 전역 스코프로 올라간다.
		// 5. 전역 스코프에는 a란 변수가 있으므로 그 a를 출력한다.
		console.log(a); // 1
	
		// 1. 현재 스코프(d)에는 c라는 변수가 없다.
		// 2. 스코프 체인을 타고 스코프(b)로 올라간다.
		// 3. 스코프(b)에는 c라는 변수가 있으므로 그 c를 출력한다.
		console.log(c); // 2
	}
	d(); // 내부함수 d 호출
}
b(); // 함수 b를 호출
```

## 변수 선언에 있어서의 스코프 체이닝 발생
```javascript
var b = 1;
var c = function() { // 외부 함수 스코프(c)의 시작
	var d = 2;
	var e = function() { // 내부 함수 스코프(e)의 시작
		// 변수의 선언을 var 없이하면 스코프 체이닝이 발생
		// 1. 현재 스코프(e)에는 d라는 변수가 없다.
		// 2. 스코프 체인을 타고 상위 스코프(c)로 이동한다.
		// 3. 스코프(c)에는 변수 d가 있으므로 그 변수에 3을 할당한다.
		d = 3;
		
		// 1. 현재 스코프(e)에는 d라는 변수가 없다.
		// 2. 스코프(c)에는 변수 b가 없다.
		// 3. 스코프 체인을 타고 상위 스코프인 전역 스코프로 이동한다.
		// 4. 전역 스코프에는 변수 b가 있으므로 그 변수에 4를 할당한다.
		b = 4;
	}
	console.log(d); // 2
	
	e();
	console.log(d); // 3 
}

console.log(b); // 1

c();
console.log(b); // 4
```

# 블록 단위의 스코프
ES5의 var는 함수 단위의 스코프
const let은 window 객체의 프로퍼티에 할당되지 않는다.
파일 별로 스코프를 가지는게 아니라 전역 스코프를 더럽힌다는 단점이 있다.
```javascript
// a.js
const a = 2;

// b.js
const a = 3; // Identifier 'a' has already been declared
```

이를 극복하기 위해 **import / export 문법**이 있다.